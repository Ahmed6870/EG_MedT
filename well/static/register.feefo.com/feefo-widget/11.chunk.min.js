(window.feefoJsonp=window.feefoJsonp||[]).push([[11],{142:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=f,i(46),i(57),i(220),i(58);var o=c(i(16)),n=c(i(2)),s=i(72),r=c(i(45));function c(t){return t&&t.__esModule?t:{default:t}}function f(t){n.default.init(this),r.default.call(this),(0,s.setTouchDeviceData)(),this._isHiddenOnMobileView="hide"===this.config.preferences[t].toLowerCase(),this._eventPromises=[],this.lightboxData={},this.lightboxIsOpen=!1,this.logger=new o.default(this.root.localName),this.mountConfig=this.opts,this.widgetReference=null,this.isMainContainerVisible=this._mainContainerVisible(),this._onWindowResize=this._onWindowResize.bind(this),this.on("unmount",this._onUnmount.bind(this)),this.on("mount",this._onMount.bind(this))}Object.assign(f.prototype,r.default.prototype,{_onMount:function(){window.addEventListener("resize",this._onWindowResize)},_onUnmount:function(){this._eventPromises.forEach(function(t){"function"==typeof t&&t()}),window.removeEventListener("resize",this._onWindowResize)},lightboxClose:function(){this.lightboxIsOpen=!1,this.update()},lightboxOpen:function(){this.lightboxIsOpen=!0,this.update()},lightboxToggle:function(){this.lightboxIsOpen?this.lightboxClose():this.lightboxOpen()},onMainMount:function(t){this.lightboxData.widgetReference=t.widgetReference,this.widgetReference=t.widgetReference,this.update()},_mainContainerVisible:function(){var t=this.config.breakpoints;return!!(window.innerWidth>=t.tablet)||!this._isHiddenOnMobileView},_onWindowResize:function(){var t=this;clearTimeout(this._onWindowResizeTimeout),this._onWindowResizeTimeout=setTimeout(function(){t.update({isMainContainerVisible:t._mainContainerVisible()})},200)}})},172:function(t,e,i){"use strict";var o=i(1),n=i(9),s=c(i(293)),r=c(i(142));function c(t){return t&&t.__esModule?t:{default:t}}function f(){this.mixin(f.prototype),r.default.call(this,"serviceMobileOption")}Object.assign(f.prototype,r.default.prototype,{onMainMount:function(t){this.lightboxData.integrationType="lightbox-service",r.default.prototype.onMainMount.call(this,t),this.initEventInstance()}}),(0,o.tag)(n.LIGHTBOX.serviceTag,s.default,null,f)},218:function(t,e){},219:function(t,e){t.exports='<div\n  class="feefowidget-logo-container feefowidget-logo-position-type-{logoPositionType} {feefowidget-logo-clickable: logoClickable}"\n  riot-style="{logoStyle}">\n  <img\n    riot-src="{logoSrc}"\n    onclick="{onClick}"\n    alt="feefo logo"\n    title="">\n</div>\n\n'},220:function(t,e,i){"use strict";var o=i(1),n=u(i(20)),s=u(i(3)),r=u(i(2)),c=u(i(17)),f=u(i(167)),l=u(i(166)),a=u(i(219));function u(t){return t&&t.__esModule?t:{default:t}}function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(){this.mixin(h.prototype),this.constants=n.default.resolve(),this.configInstance=r.default.init(this),this.logoClickable=!0,this.logoPositionType="inline",this.logoReady=!1,this.logoSrc="",this.logoStyle={},this.widgetReference=null,this.on("mount",this._onMount),this.on("unmount",this._onUnmount),this.on("update",this._onUpdate)}i(218),Object.assign(h.prototype,{_buildLogoUrl:function(){var t=this._fetchPreferences(),e=this.config.preferences,i=this.config.isModeService?e.serviceTimeFrame:e.productTimeFrame;if(null!==t){var o=this.config.urlApi+"/logo";if(o+="?merchantidentifier="+this.config.merchantSlug,o+="&template="+t.templateFileName,this.config.tags)o+="&tags="+encodeURIComponent(this.config.tags.replace(":","="));if(this.config.isModeProduct){this.config.parentProductSku&&"*"!==this.config.parentProductSku?o+="&parentvendorref="+this.config.parentProductSku:this.config.productSku&&"*"!==this.config.productSku&&(o+="&vendorref="+this.config.productSku);var n=this.constants.PRODUCT_NO_REVIEWS_OPTIONS;switch(e.productNoReviewsOption){case n.HIDE:o+="&smallonzero=true";break;case n.SHOW_SERVICE:o+="&servicedefault=true"}}this.config.isTypeLightbox&&i&&"all"===i.toLowerCase()&&(o+="&since=all"),this.logoSrc=o}},_buildStyle:function(){var t=this._fetchPreferences();null!==t&&(this.logoPositionType=t.positionType.toLowerCase(),t.positionType===this.constants.POSITION_TYPES.FIXED&&(this.logoStyle=this._style(t.offset,t.position,t.size)))},_fetchPreferences:function(){var t={};if("object"!==g(this.config))return null;if(this.config.isModeService&&!this.config.isViewportMobile)t=this.config.preferences.serviceWidget;else if(this.config.isModeService&&this.config.isViewportMobile)switch(this.config.preferences.serviceMobileOption){case"DIFFERENT":t=this.config.preferences.serviceMobileWidget;break;case"HIDE":t.positionType="hide";break;default:t=this.config.preferences.serviceWidget}else if(this.config.isModeProduct&&!this.config.isViewportMobile)t=this.config.preferences.productWidget;else if(this.config.isModeProduct&&this.config.isViewportMobile)switch(this.config.preferences.productMobileOption){case"DIFFERENT":t=this.config.preferences.productMobileWidget;break;case"HIDE":t.positionType="hide";break;default:t=this.config.preferences.productWidget}return t},_onMount:function(){var t=this;this.configInstance=r.default.setReference(this.opts.widgetReference,this.configInstance),this.configInstance.listen(this),this.eventsInstance=c.default.getInstance(this.opts.widgetReference),this.eventPromises=[this.eventsInstance.on("updated-summary",function(e){return t._onUpdatedSummary(e)},!0)],this.widgetReference=this.opts.widgetReference,s.default.setConfig("lightboxToggle",function(e){return t.onClick(e)}),this.update()},_onUnmount:function(){this.eventPromises.forEach(function(t){"function"==typeof t&&t()})},_onUpdate:function(){this._buildStyle(),this._buildLogoUrl()},_onUpdatedSummary:function(t){if(this.config.isModeProduct&&"object"===g(t)){var e=this.config.preferences,i=this.constants.PRODUCT_NO_REVIEWS_OPTIONS,o=e.productNoReviewsOption===i.SHOW_SERVICE,n=t.rating&&t.rating.product&&t.rating.product.count>0;if(o&&!n)return f.default.unmount(),void l.default.mount(!0);this.logoClickable=Boolean(n),this.update()}},_style:function(t,e,i){t="number"==typeof t?t:10,e="string"==typeof e?e:"BOTTOM_RIGHT";var o=0,n=0;if("string"==typeof i&&i.indexOf("x")>0&&i.indexOf("x")<i.length-1){var s=parseInt(i.split("x")[0].trim(),10),r=parseInt(i.split("x")[1].trim(),10);"number"==typeof s&&(o=-s/2),"number"==typeof r&&(n=-r/2)}var c="z-index: 8000!important; ";return{TOP:c+"top: "+t.toString()+"px; bottom: auto; left: 50%; margin-left: "+o.toString()+"px; right: auto",TOP_LEFT:c+"top: "+t.toString()+"px; bottom: auto; left: "+t.toString()+"px; right: auto",TOP_RIGHT:c+"top: "+t.toString()+"px; bottom: auto; left: auto; right: "+t.toString()+"px",BOTTOM:c+"top: auto; bottom: "+t.toString()+"px; left: 50%; margin-left: "+o.toString()+"px; right: auto",BOTTOM_LEFT:c+"top: auto; bottom: "+t.toString()+"px; left: "+t.toString()+"px; right: auto",BOTTOM_RIGHT:c+"top: auto; bottom: "+t.toString()+"px; left: auto; right: "+t.toString()+"px",RIGHT:c+"top: 50%; margin-top: "+n.toString()+"px; bottom: auto; left: auto; right: "+t.toString()+"px",LEFT:c+"top: 50%; margin-top: "+n.toString()+"px; bottom: auto; left: "+t.toString()+"px; right: auto"}[e]},onClick:function(){this.logoClickable&&"function"==typeof this.opts.onClick&&this.opts.onClick()}}),(0,o.tag)("feefowidget-logo-large",a.default,null,h)},293:function(t,e){t.exports='<feefowidget-container-main\n  if="{isMainContainerVisible}"\n  on-mount="{onMainMount}"\n  mount-config="{mountConfig}">\n\n  <feefowidget-logo-large\n    on-click="{parent.lightboxToggle}"\n    widget-reference="{widgetReference}"></feefowidget-logo-large>\n\n  <feefowidget-window-modal\n    track-click="{parent.trackClickDebounced}"\n    close-modal="{parent.lightboxClose}"\n    modal-class="feefowidget-modal-logo-lightbox"\n    render-data="{parent.lightboxData}"\n    render-tag="feefowidget-global"\n    show-modal="{parent.lightboxIsOpen}"\n    widget-reference="{parent.widgetReference}"></feefowidget-window-modal>\n\n</feefowidget-container-main>\n'}}]);